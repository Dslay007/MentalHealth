<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SoulCare - Web Dashboard</title>
    <!-- Memuat Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Memuat Font Inter dari Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* Menggunakan font Inter sebagai default */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background-color: #f7f9ff; /* BG Biru/Ungu yang sangat muda, lebih segar */
        }

        /* Scrollbar kustom */
        #screen-content::-webkit-scrollbar { width: 6px; }
        #screen-content::-webkit-scrollbar-track { background: #f1f1f1; }
        #screen-content::-webkit-scrollbar-thumb { background: #c5bbf2; border-radius: 10px; }
        #screen-content::-webkit-scrollbar-thumb:hover { background: #a092db; }

        /* Animasi untuk lingkaran pernapasan */
        @keyframes breathe {
            0%, 100% { transform: scale(0.9); opacity: 0.7; }
            50% { transform: scale(1.1); opacity: 1; }
        }
        .breathing-circle { animation: breathe 5s ease-in-out infinite; }

        /* Style untuk Custom Alert/Modal */
        #custom-alert { transition: all 0.3s ease-in-out; }

        /* Style untuk game Filter Pikiran */
        .thought-card { transition: transform 0.3s ease, opacity 0.3s ease; }

        /* Style untuk Bar Chart di Hasil Tes */
        .chart-bar {
            transition: width 1.5s ease-in-out;
            width: 0; /* Mulai dari 0 */
        }

        /* Style untuk Chat Bubbles */
        .chat-bubble {
            transition: all 0.3s ease;
        }
        #chat-messages::-webkit-scrollbar { display: none; }
        #chat-messages { -ms-overflow-style: none; scrollbar-width: none; }

        /* Transisi hover yang lebih 'playful' */
        .card-hover {
             transition: all 0.2s ease-in-out;
        }
        .card-hover:hover {
            transform: scale(1.03);
            box-shadow: 0 10px 20px -5px rgba(79, 70, 229, 0.15);
        }

        /* Animasi untuk toggle switch */
        .toggle-checkbox:checked + .toggle-label {
            background-color: #4f46e5; /* indigo-600 */
        }
        .toggle-checkbox:checked + .toggle-label .toggle-dot {
            transform: translateX(100%);
        }

    </style>
</head>
<body class="flex min-h-screen">

    <!-- Navigasi Sidebar Kiri -->
    <nav class="w-72 bg-white shadow-2xl flex flex-col p-6 sticky top-0 h-screen z-10">
        <!-- Logo -->
        <div class="flex items-center space-x-3 p-3 mb-8">
            <div class="p-3 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-lg">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z"></path><path d="M12 12a10 10 0 1 0 0-20 10 10 0 0 0 0 20z"></path><path d="M12 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"></path></svg>
            </div>
            <span class="text-2xl font-bold text-gray-900">SoulCare</span>
        </div>

        <div class="space-y-3 flex-1">
            <!-- Tombol Home -->
            <button id="nav-home" onclick="showPage('page-home')" class="nav-btn bg-indigo-100 text-indigo-700 p-4 rounded-lg active:scale-95 w-full flex items-center space-x-3 transition-all hover:scale-105">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                <span class="text-base font-semibold">Dashboard</span>
            </button>
            <!-- Tombol Tes Awal -->
            <button id="nav-test" onclick="showPage('page-test')" class="nav-btn text-gray-500 hover:bg-gray-100 p-4 rounded-lg active:scale-95 w-full flex items-center space-x-3 transition-all hover:scale-105">
                 <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><line x1="12" y1="11" x2="12" y2="17"></line><line x1="9" y1="14" x2="15" y2="14"></line></svg>
                <span class="text-base font-semibold">Pusat Tes</span>
            </button>
            <!-- Tombol Jurnal -->
            <button id="nav-journal" onclick="showPage('page-journal')" class="nav-btn text-gray-500 hover:bg-gray-100 p-4 rounded-lg active:scale-95 w-full flex items-center space-x-3 transition-all hover:scale-105">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></svg>
                <span class="text-base font-semibold">Jurnal Harian</span>
            </button>
            <!-- Tombol Games -->
            <button id="nav-games" onclick="showPage('page-games')" class="nav-btn text-gray-500 hover:bg-gray-100 p-4 rounded-lg active:scale-95 w-full flex items-center space-x-3 transition-all hover:scale-105">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"></path><path d="M12 12m-4 0a4 4 0 1 0 8 0 4 4 0 1 0-8 0"></path><path d="M12 12m-10 0a10 10 0 1 0 20 0 10 10 0 1 0-20 0"></path></svg>
                <span class="text-base font-semibold">Mini-Games</span>
            </button>
            <!-- Tombol AI Chat -->
            <button id="nav-chat" onclick="showPage('page-chat')" class="nav-btn text-gray-500 hover:bg-gray-100 p-4 rounded-lg active:scale-95 w-full flex items-center space-x-3 transition-all hover:scale-105">
                 <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path><path d="M12 12a10 10 0 1 0 0-20 10 10 0 0 0 0 20z"/><path d="M12 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"/></svg>
                <span class="text-base font-semibold">Soul-AI Chat</span>
            </button>
            <!-- Tombol Profil -->
            <button id="nav-profile" onclick="showPage('page-profile')" class="nav-btn text-gray-500 hover:bg-gray-100 p-4 rounded-lg active:scale-95 w-full flex items-center space-x-3 transition-all hover:scale-105">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                <span class="text-base font-semibold">Profil & Poin</span>
            </button>
        </div>
        <!-- Link Dashboard Konselor -->
        <div class="mt-auto">
             <button class="w-full text-left text-sm text-gray-400 hover:text-indigo-600 p-3 rounded-lg hover:bg-gray-100 transition-all">
                Masuk sebagai Konselor
            </button>
        </div>
    </nav>

    <!-- Konten Layar Aplikasi (Bisa di-scroll) -->
    <main id="screen-content" class="flex-1 overflow-y-auto p-12">
        
        <!-- Halaman 1: Home/Dashboard (Default) -->
        <div id="page-home" class="page space-y-10">
            <!-- Header Sapaan -->
            <div>
                <h1 class="text-4xl font-bold text-gray-900">Selamat Datang, Dona!</h1>
                <p id="vibe-header" class="text-lg text-gray-500 transition-all mt-1">Bagaimana perasaanmu hari ini?</p>
            </div>
            
            <!-- Grid Dashboard -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Kolom Kiri (Gamifikasi) -->
                <div class="lg:col-span-1 space-y-6">
                    <!-- Pilihan Vibe Cepat -->
                    <div class="bg-white p-6 rounded-2xl shadow-lg">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Vibe Cepat Hari Ini</h3>
                        <div class="grid grid-cols-2 gap-3" id="vibe-selection">
                            <div onclick="selectVibe('Senang', this)" class="vibe-btn p-4 bg-indigo-100 rounded-xl cursor-pointer hover:bg-indigo-200 transition-all active:scale-95 ring-0 ring-indigo-500 flex items-center space-x-3">
                                <span class="text-3xl">üòä</span>
                                <p class="font-medium text-indigo-800">Senang</p>
                            </div>
                            <div onclick="selectVibe('Tenang', this)" class="vibe-btn p-4 bg-blue-100 rounded-xl cursor-pointer hover:bg-blue-200 transition-all active:scale-95 ring-0 ring-blue-500 flex items-center space-x-3">
                                <span class="text-3xl">üòå</span>
                                <p class="font-medium text-blue-800">Tenang</p>
                            </div>
                            <div onclick="selectVibe('Cemas', this)" class="vibe-btn p-4 bg-yellow-100 rounded-xl cursor-pointer hover:bg-yellow-200 transition-all active:scale-95 ring-0 ring-yellow-500 flex items-center space-x-3">
                                <span class="text-3xl">üòü</span>
                                <p class="font-medium text-yellow-800">Cemas</p>
                            </div>
                            <div onclick="selectVibe('Marah', this)" class="vibe-btn p-4 bg-red-100 rounded-xl cursor-pointer hover:bg-red-200 transition-all active:scale-95 ring-0 ring-red-500 flex items-center space-x-3">
                                <span class="text-3xl">üò†</span>
                                <p class="font-medium text-red-800">Marah</p>
                            </div>
                        </div>
                    </div>
                     <!-- Gamifikasi Poin -->
                    <div class="bg-white p-6 rounded-2xl shadow-lg text-center card-hover">
                        <h3 class="text-xl font-semibold text-gray-800">Poin Refleksi</h3>
                        <span id="total-points-home" class="text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-500 to-indigo-600 mt-2 block">120</span>
                        <p class="text-gray-500">Poin didapat dari jurnal & game.</p>
                    </div>
                     <!-- Streak -->
                    <div class="bg-white p-6 rounded-2xl shadow-lg text-center card-hover">
                        <h3 class="text-xl font-semibold text-gray-800">Streak Jurnal</h3>
                        <span id="streak-count-home" class="text-6xl font-extrabold text-orange-500 mt-2 block">üî• 5</span>
                        <p class="text-gray-500">Hari berturut-turut!</p>
                    </div>
                </div>

                <!-- Kolom Kanan (Aktivitas) -->
                <div class="lg:col-span-2 space-y-6">
                    
                    <!-- Insight dari Soul-AI (BARU, Sesuai Gambar) -->
                    <div class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white p-6 rounded-2xl shadow-lg flex items-center space-x-5 card-hover relative overflow-hidden">
                        <div class="flex-shrink-0 z-10">
                            <!-- Icon AI (mirip gambar) -->
                            <div class="p-3 bg-white/20 rounded-xl">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z"></path><path d="M12 12a10 10 0 1 0 0-20 10 10 0 0 0 0 20z"></path><path d="M12 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"></path></svg>
                            </div>
                        </div>
                        <div class="relative z-10">
                            <h3 class="font-bold text-xl">Insight dari Soul-AI</h3>
                            <p class="mt-1 text-sm opacity-90">Pola jurnalmu 3 hari ini menunjukkan kamu sedang fokus pada target. Hebat! Tapi, jangan lupa istirahat. Coba main "Tarik Napas" 5 menit hari ini.</p>
                        </div>
                        <div class="absolute -right-8 -bottom-8 w-32 h-32 bg-white/10 rounded-full opacity-50 z-0"></div>
                    </div>

                    <!-- Hasil Tes Terakhir -->
                    <div class="bg-white p-6 rounded-2xl shadow-lg card-hover">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">Hasil Tes Terakhir</h3>
                        <p class="text-gray-500 mb-4">Ini adalah ringkasan dari tes terakhirmu. Kamu bisa mengambil tes ulang kapanpun.</p>
                        <!-- Chart dummy sederhana -->
                        <div class="space-y-3">
                            <div class="flex items-center">
                                <span class="w-24 font-medium text-gray-600">Stres</span>
                                <div class="flex-1 bg-gray-200 rounded-full h-4">
                                    <div class="bg-gradient-to-r from-red-400 to-red-600 h-4 rounded-full" style="width: 70%"></div>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <span class="w-24 font-medium text-gray-600">Kecemasan</span>
                                <div class="flex-1 bg-gray-200 rounded-full h-4">
                                    <div class="bg-gradient-to-r from-yellow-400 to-yellow-600 h-4 rounded-full" style="width: 40%"></div>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <span class="w-24 font-medium text-gray-600">Depresi</span>
                                <div class="flex-1 bg-gray-200 rounded-full h-4">
                                    <div class="bg-gradient-to-r from-blue-400 to-blue-600 h-4 rounded-full" style="width: 25%"></div>
                                </div>
                            </div>
                        </div>
                        <button onclick="showPage('page-result')" class="mt-5 text-sm font-semibold text-indigo-600 hover:text-indigo-800">Lihat Detail Hasil &rarr;</button>
                    </div>

                    <!-- Menu Aktivitas Cepat -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Navigasi ke Jurnal -->
                        <div onclick="showPage('page-journal')" class="flex items-center bg-white p-6 rounded-2xl shadow-lg cursor-pointer card-hover border-2 border-transparent hover:border-yellow-400">
                            <div class="p-4 bg-yellow-100 rounded-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-yellow-700"><path d="M12 20h9a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7z"></path><line x1="16" x2="8" y1="2" y2="2"></line><line x1="16" x2="8" y1="6" y2="6"></line><line x1="10" x2="10" y1="14" y2="14"></line></svg>
                            </div>
                            <div class="ml-5">
                                <h4 class="text-xl font-semibold text-gray-900">Jurnal Harian</h4>
                                <p class="text-base text-gray-500">Tuliskan +10 Poin</p>
                            </div>
                        </div>
                        <!-- Navigasi ke Mini Games -->
                        <div onclick="showPage('page-games')" class="flex items-center bg-white p-6 rounded-2xl shadow-lg cursor-pointer card-hover border-2 border-transparent hover:border-teal-400">
                            <div class="p-4 bg-teal-100 rounded-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-teal-700"><path d="M10 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V10M18 4h-4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path><path d="M6 18v-4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2z"></path></svg>
                            </div>
                            <div class="ml-5">
                                <h4 class="text-xl font-semibold text-gray-900">Mini-Games</h4>
                                <p class="text-base text-gray-500">Mainkan +5 Poin</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Halaman 2: Jurnal Harian (LAYOUT DIPERBAIKI) -->
        <div id="page-journal" class="page space-y-6 flex flex-col items-center" style="display: none;">
            <!-- Header Halaman -->
            <div class="w-full max-w-3xl">
                <h1 class="text-4xl font-bold text-gray-900">Jurnal Harian</h1>
            </div>

            <!-- Pelacak Mood (BARU) -->
            <div class="bg-white p-6 rounded-2xl shadow-lg max-w-3xl w-full">
                <h3 class="font-semibold text-gray-600 mb-4 text-lg">Bagaimana mood-mu untuk entri ini?</h3>
                <div class="flex justify-around" id="mood-selection">
                    <button onclick="selectMood('Sangat Sedih', this)" class="mood-btn p-3 rounded-full hover:bg-red-100 transition-all active:scale-95 ring-0 ring-red-400">
                        <span class="text-4xl">üò≠</span>
                    </button>
                    <button onclick="selectMood('Sedih', this)" class="mood-btn p-3 rounded-full hover:bg-yellow-100 transition-all active:scale-95 ring-0 ring-yellow-400">
                        <span class="text-4xl">üòü</span>
                    </button>
                    <button onclick="selectMood('Biasa Saja', this)" class="mood-btn p-3 rounded-full hover:bg-blue-100 transition-all active:scale-95 ring-0 ring-blue-400">
                        <span class="text-4xl">üòå</span>
                    </button>
                    <button onclick="selectMood('Senang', this)" class="mood-btn p-3 rounded-full hover:bg-indigo-100 transition-all active:scale-95 ring-0 ring-indigo-400">
                        <span class="text-4xl">üòä</span>
                    </button>
                    <button onclick="selectMood('Sangat Senang', this)" class="mood-btn p-3 rounded-full hover:bg-green-100 transition-all active:scale-95 ring-0 ring-green-400">
                        <span class="text-4xl">ü§©</span>
                    </button>
                </div>
            </div>

            <!-- Kartu Pertanyaan Reflektif (Dummy) -->
            <div class="bg-white p-6 rounded-2xl shadow-lg max-w-3xl w-full">
                <h3 class="font-semibold text-gray-500">Pertanyaan Hari Ini:</h3>
                <p id="journal-prompt" class="text-2xl font-medium text-gray-900 mt-2">Apa satu hal kecil yang kamu syukuri hari ini?</p>
            </div>

            <!-- Text Area untuk Menulis -->
            <textarea id="journal-input" class="w-full max-w-3xl h-64 p-5 text-lg border border-gray-200 rounded-2xl shadow-inner focus:outline-none focus:ring-2 focus:ring-indigo-400" placeholder="Tuliskan ceritamu di sini..."></textarea>

            <!-- Pengingat (BARU) -->
            <div class="bg-white p-6 rounded-2xl shadow-lg max-w-3xl w-full flex justify-between items-center">
                <h3 class="text-lg font-semibold text-gray-700">Setel Pengingat Jurnal Harian</h3>
                <div class="relative inline-block w-12 mr-2 align-middle select-none transition duration-200 ease-in">
                    <input type="checkbox" name="toggle" id="journal-reminder" class="toggle-checkbox absolute block w-7 h-7 rounded-full bg-white border-4 appearance-none cursor-pointer"/>
                    <label for="journal-reminder" class="toggle-label block overflow-hidden h-7 rounded-full bg-gray-300 cursor-pointer transition-colors duration-200 ease-in-out">
                         <span class="toggle-dot absolute left-0 inline-block w-7 h-7 bg-white rounded-full shadow-md transform transition-transform duration-200 ease-in-out"></span>
                    </label>
                </div>
            </div>

            <!-- Tombol Simpan -->
            <button onclick="saveJournal()" class="w-full max-w-3xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold py-4 px-6 text-lg rounded-xl shadow-lg hover:shadow-xl hover:opacity-90 transition-all focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 active:scale-95">
                Simpan & Dapatkan 10 Poin üî•
            </button>
        </div>

        <!-- Halaman 3: Pilihan Mini-Games (LEBIH COLORFUL) -->
        <div id="page-games" class="page space-y-8" style="display: none;">
            <!-- Header Halaman -->
            <div>
                <h1 class="text-4xl font-bold text-gray-900">Permainan Reflektif</h1>
                <p class="text-lg text-gray-500 mt-1">Latih pikiranmu dengan cara yang seru dan dapatkan poin!</p>
            </div>

            <!-- Daftar Game -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Game 1: Tarik Napas (Fungsional) -->
                <div onclick="showPage('page-game-breathe')" class="bg-white p-6 rounded-2xl shadow-lg cursor-pointer card-hover border-4 border-transparent hover:border-blue-300 space-y-4">
                    <div class="p-4 bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg w-min shadow-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16.4 18.2c.3-.2.6-.4.8-.7a4.3 4.3 0 0 0 1.2-3.4c0-1.6-1-3-2.4-3.8"></path><path d="M12 2a4.3 4.3 0 0 0-1.2 3.4c0 1.6 1 3 2.4 3.8"></path><path d="M7.6 18.2c-.3-.2-.6-.4-.8-.7a4.3 4.3 0 0 1-1.2-3.4c0-1.6 1-3 2.4-3.8"></path><path d="M12 22a4.3 4.3 0 0 1 1.2-3.4c0-1.6-1-3-2.4-3.8"></path><path d="M2 10.3a4.3 4.3 0 0 0 1.9 3.5 4.3 4.3 0 0 0 5.2.3"></path><path d="M22 10.3a4.3 4.3 0 0 1-1.9 3.5 4.3 4.3 0 0 1-5.2.3"></path><circle cx="12" cy="12" r="2"></circle></svg>
                    </div>
                    <h4 class="text-2xl font-semibold text-gray-900">Tarik Napas</h4>
                    <p class="text-base text-gray-500">Latihan 1 menit untuk lebih tenang dan fokus.</p>
                    <span class="inline-block bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full">+5 Poin</span>
                </div>
                <!-- Game 2: Filter Pikiran (Sekarang Fungsional) -->
                <div onclick="showPage('page-game-filter')" class="bg-white p-6 rounded-2xl shadow-lg cursor-pointer card-hover border-4 border-transparent hover:border-green-300 space-y-4">
                    <div class="p-4 bg-gradient-to-br from-green-400 to-green-600 rounded-lg w-min shadow-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 6 3 3 3-3"></path><path d="m3 12 3 3 3-3"></path><path d="m3 18 3 3 3-3"></path><line x1="12" y1="6" x2="21" y2="6"></line><line x1="12" y1="12" x2="21" y2="12"></line><line x1="12" y1="18" x2="21" y2="18"></line></svg>
                    </div>
                    <h4 class="text-2xl font-semibold text-gray-900">Filter Pikiran</h4>
                    <p class="text-base text-gray-500">Sortir pikiran yang bermanfaat & tidak bermanfaat.</p>
                    <span class="inline-block bg-green-100 text-green-800 text-sm font-medium px-3 py-1 rounded-full">+5 Poin</span>
                </div>
                <!-- Game 3: Puzzle Syukur (Mock) -->
                <div class="bg-white p-6 rounded-2xl shadow-lg transition-all opacity-60 space-y-4 border-4 border-transparent">
                    <div class="p-4 bg-gradient-to-br from-purple-400 to-purple-600 rounded-lg w-min shadow-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6H5a2 2 0 0 0-2 2v10"></path><path d="m21 16-4-4-4 4"></path><path d="m6 9 3-3 3 3"></path><path d="M3 11v4a2 2 0 0 0 2 2h11"></path></svg>
                    </div>
                    <h4 class="text-2xl font-semibold text-gray-900">Puzzle Syukur</h4>
                    <p class="text-base text-gray-500">Susun potongan gambar & pesan syukur harian.</p>
                    <span class="inline-block bg-gray-200 text-gray-600 text-sm font-medium px-3 py-1 rounded-full">Segera Hadir</span>
                </div>
            </div>
        </div>

        <!-- Halaman 4: Mini-Game Tarik Napas (Fungsional) -->
        <div id="page-game-breathe" class="page" style="display: none;">
            <!-- Header Halaman -->
            <div class="flex items-center space-x-3 mb-8">
                <button onclick="stopBreatheGame(); showPage('page-games');" class="p-2 rounded-full hover:bg-gray-200 active:scale-95">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                </button>
                <h1 class="text-4xl font-bold text-gray-900">Tarik Napas</h1>
            </div>

            <!-- Konten Game -->
            <div class="flex flex-col items-center justify-center h-[60vh] text-center bg-white rounded-2xl shadow-lg">
                <div class="relative w-64 h-64 flex items-center justify-center">
                    <div class="absolute w-full h-full bg-blue-200 rounded-full breathing-circle"></div>
                    <div class="absolute w-48 h-48 bg-blue-300 rounded-full breathing-circle" style="animation-delay: -0.5s;"></div>
                    <div class="absolute w-32 h-32 bg-blue-400 rounded-full breathing-circle" style="animation-delay: -1s;"></div>
                </div>
                <p id="breathe-text" class="text-3xl font-semibold text-gray-800 mt-16">Siap?</p>
            </div>
        </div>

        <!-- Halaman 5: Mini-Game Filter Pikiran -->
        <div id="page-game-filter" class="page" style="display: none;">
            <!-- Header Halaman -->
            <div class="flex items-center space-x-3 mb-8">
                <button onclick="showPage('page-games');" class="p-2 rounded-full hover:bg-gray-200 active:scale-95">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-gray-600"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                </button>
                <h1 class="text-4xl font-bold text-gray-900">Filter Pikiran</h1>
            </div>

            <!-- Konten Game -->
            <div class="flex flex-col items-center justify-center h-[60vh] text-center bg-white rounded-2xl shadow-lg p-10">
                <p class="text-2xl text-gray-600">Apakah pikiran ini...</p>
                
                <!-- Kartu Pikiran -->
                <div id="thought-card" class="thought-card bg-gray-100 p-8 rounded-2xl shadow-inner w-full max-w-lg my-6 min-h-[150px] flex items-center justify-center">
                    <p id="thought-text" class="text-3xl font-medium text-gray-800">Saya pasti akan gagal dalam presentasi ini.</p>
                </div>

                <!-- Tombol Pilihan -->
                <div class="w-full max-w-lg flex space-x-4">
                    <button onclick="checkThought(false)" class="w-full bg-gradient-to-r from-red-500 to-red-600 text-white font-semibold py-4 px-5 text-lg rounded-xl shadow-lg hover:shadow-xl hover:opacity-90 transition-all active:scale-95">
                        Tidak Bermanfaat
                    </button>
                    <button onclick="checkThought(true)" class="w-full bg-gradient-to-r from-green-500 to-green-600 text-white font-semibold py-4 px-5 text-lg rounded-xl shadow-lg hover:shadow-xl hover:opacity-90 transition-all active:scale-95">
                        Bermanfaat
                    </button>
                </div>

                <!-- Feedback -->
                <p id="filter-feedback" class="text-2xl font-semibold h-10 mt-6"></p>
            </div>
        </div>


        <!-- Halaman 6: Profil (Mock) -->
        <div id="page-profile" class="page space-y-8" style="display: none;">
             <!-- Header Halaman -->
            <div>
                <h1 class="text-4xl font-bold text-gray-900">Profil & Pencapaian</h1>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Kolom Kiri: Info & Streak -->
                <div class="lg:col-span-1 space-y-6">
                    <div class="flex flex-col items-center space-y-3 bg-white p-8 rounded-2xl shadow-lg">
                        <img src="https://placehold.co/120x120/E9D5FF/4C1D95?text=DH" alt="Foto Profil" class="w-32 h-32 rounded-full border-4 border-purple-200 shadow-lg">
                        <h2 class="text-3xl font-semibold">Dona Haryanto</h2>
                        <p class="text-base text-gray-500">Bergabung Sejak 2025</p>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-lg text-center card-hover">
                        <h3 class="text-xl font-semibold text-gray-800">Streak Jurnal</h3>
                        <div class="flex items-center justify-center space-x-3 mt-3">
                            <span class="text-5xl">üî•</span>
                            <span id="streak-count" class="text-5xl font-bold text-orange-500">5</span>
                            <span class="text-lg text-gray-500">hari!</span>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-lg text-center card-hover">
                        <h3 class="text-xl font-semibold text-gray-800">Total Poin Refleksi</h3>
                        <span id="total-points" class="text-5xl font-bold text-indigo-600 mt-3 block">120</span>
                    </div>
                </div>

                <!-- Kolom Kanan: Pencapaian -->
                <div class="lg:col-span-2 bg-white p-8 rounded-2xl shadow-lg">
                     <h3 class="text-2xl font-semibold text-gray-800 mb-6 text-center">Lencana Pencapaian</h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-6">
                        <!-- Badge 1 -->
                        <div class="text-center p-4 bg-gray-100 rounded-lg transition-all hover:scale-105">
                            <span class="text-6xl">üßò</span>
                            <p class="text-md font-semibold text-gray-700 mt-2">Pikiran Tenang</details>
                            <p class="text-sm text-gray-500">Selesaikan 5x 'Tarik Napas'</p>
                        </div>
                        <!-- Badge 2 -->
                        <div class="text-center p-4 bg-gray-100 rounded-lg transition-all hover:scale-105">
                            <span class="text-6xl">‚úçÔ∏è</span>
                            <p class="text-md font-semibold text-gray-700 mt-2">Penulis Jurnal</details>
                            <p class="text-sm text-gray-500">Tulis jurnal 3 hari beruntun</p>
                        </div>
                         <!-- Badge 3 -->
                        <div class="text-center p-4 bg-gray-100 rounded-lg transition-all hover:scale-105">
                            <span class="text-6xl">üß†</span>
                            <p class="text-md font-semibold text-gray-700 mt-2">Penyaring Pikiran</details>
                            <p class="text-sm text-gray-500">Mainkan 10x 'Filter Pikiran'</smap>
                        </div>
                        <!-- Badge 4 (Terkunci) -->
                        <div class="text-center p-4 bg-gray-100 rounded-lg opacity-40 transition-all hover:scale-105">
                            <span class="text-6xl">üí™</span>
                            <p class="text-md font-semibold text-gray-700 mt-2">Mental Kuat</details>
                            <p class="text-sm text-gray-500">Streak 7 hari & 1000 Poin</p>
                        </div>
                        <!-- Badge 5 (Terkunci) -->
                        <div class="text-center p-4 bg-gray-100 rounded-lg opacity-40 transition-all hover:scale-105">
                            <span class="text-6xl">‚òÄÔ∏è</span>
                            <p class="text-md font-semibold text-gray-700 mt-2">Pagi Positif</details>
                            <p class="text-sm text-gray-500">Jurnal sebelum jam 8 pagi</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Halaman 7: Tes Awal (DIROMBAK) -->
        <div id="page-test" class="page" style="display: none;">
             <!-- Header Halaman -->
            <div>
                <h1 class="text-4xl font-bold text-gray-900">Pusat Tes Kesehatan Mental</h1>
                <p class="text-lg text-gray-500 mt-1">Pilih tes berdasarkan apa yang ingin kamu ketahui saat ini.</p>
            </div>

            <!-- Pilihan Paket Tes (DIROMBAK per Kategori) -->
            <div id="test-categories" class="mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                
                <!-- Kategori 1: Tes Stres -->
                <div class="bg-white p-8 rounded-2xl shadow-lg card-hover border-4 border-transparent hover:border-red-400 flex flex-col">
                    <div class="p-4 bg-gradient-to-br from-red-400 to-red-600 rounded-xl w-min mb-4 shadow-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" y1="20" x2="4" y2="8"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="20" y1="20" x2="20" y2="12"></line></svg>
                    </div>
                    <h3 class="text-2xl font-semibold text-gray-900">Tes Stres</h3>
                    <p class="text-gray-600 mt-2 flex-1">Merasa tertekan atau kewalahan akhir-akhir ini? Cek level stresmu di sini (5 pertanyaan).</p>
                    <div class="mt-6">
                        <span class="inline-block bg-red-100 text-red-800 text-sm font-medium px-3 py-1 rounded-full mb-4">+20 Poin</span>
                        <button onclick="startTest('stres')" class="w-full bg-gradient-to-r from-red-500 to-red-600 text-white font-semibold py-3 px-6 text-lg rounded-xl shadow-lg hover:shadow-xl hover:opacity-90 transition-all active:scale-95">
                            Mulai Tes
                        </button>
                    </div>
                </div>

                <!-- Kategori 2: Tes Kecemasan -->
                <div class="bg-white p-8 rounded-2xl shadow-lg card-hover border-4 border-transparent hover:border-yellow-400 flex flex-col">
                    <div class="p-4 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-xl w-min mb-4 shadow-lg">
                         <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                    </div>
                    <h3 class="text-2xl font-semibold text-gray-900">Tes Kecemasan</h3>
                    <p class="text-gray-600 mt-2 flex-1">Sering merasa cemas, khawatir, atau panik? Tes ini (5 pertanyaan) bisa membantumu.</p>
                    <div class="mt-6">
                        <span class="inline-block bg-yellow-100 text-yellow-800 text-sm font-medium px-3 py-1 rounded-full mb-4">+20 Poin</span>
                        <button onclick="startTest('cemas')" class="w-full bg-gradient-to-r from-yellow-500 to-yellow-600 text-white font-semibold py-3 px-6 text-lg rounded-xl shadow-lg hover:shadow-xl hover:opacity-90 transition-all active:scale-95">
                            Mulai Tes
                        </button>
                    </div>
                </div>

                <!-- Kategori 3: Tes Mood/Depresi -->
                <div class="bg-white p-8 rounded-2xl shadow-lg card-hover border-4 border-transparent hover:border-blue-400 flex flex-col">
                    <div class="p-4 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl w-min mb-4 shadow-lg">
                         <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="8" y1="15" x2="16" y2="15"></line><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line></svg>
                    </div>
                    <h3 class="text-2xl font-semibold text-gray-900">Tes Mood (Depresi)</h3>
                    <p class="text-gray-600 mt-2 flex-1">Merasa sedih atau kehilangan minat belakangan ini? Cek mood-mu di sini (5 pertanyaan).</p>
                    <div class="mt-6">
                        <span class="inline-block bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full mb-4">+20 Poin</span>
                        <button onclick="startTest('depresi')" class="w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold py-3 px-6 text-lg rounded-xl shadow-lg hover:shadow-xl hover:opacity-90 transition-all active:scale-95">
                            Mulai Tes
                        </button>
                    </div>
                </div>

            </div>

            <!-- Pertanyaan Kuis (disembunyikan, untuk Starter Tes) -->
            <div id="test-questions" class="mt-6 bg-white p-8 rounded-2xl shadow-lg max-w-2xl w-full" style="display: none;">
                <p class="text-sm font-medium text-indigo-600" id="question-progress">Pertanyaan 1 dari 5</p>
                <h3 class="text-2xl font-semibold text-gray-900 mt-2" id="question-text">Saya merasa sulit untuk tenang dan rileks.</h3>
                
                <div class="space-y-3 mt-6" id="question-options">
                    <!-- Opsi akan di-generate oleh JS -->
                </div>
            </div>
        </div>

        <!-- Halaman 8: Hasil Tes -->
         <div id="page-result" class="page" style="display: none;">
             <!-- Header Halaman -->
            <div>
                <h1 class="text-4xl font-bold text-gray-900">Hasil Tes Anda</h1>
                <p class="text-lg text-gray-500 mt-1">Berikut adalah ringkasan kondisimu selama seminggu terakhir.</p>
            </div>

            <div class="mt-6 grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Kolom Kiri: Grafik -->
                <div class="lg:col-span-2 bg-white p-8 rounded-2xl shadow-lg">
                    <h3 class="text-2xl font-semibold text-gray-900 mb-8">Grafik Visual Kondisi</h3>
                    <div class="space-y-6">
                        <!-- Bar Stres -->
                        <div id="chart-stres-container">
                            <span class="text-lg font-semibold text-red-700">Stres</span>
                            <div class="flex-1 bg-gray-200 rounded-full h-6 mt-2 shadow-inner">
                                <div id="chart-stres" class="chart-bar bg-gradient-to-r from-red-400 to-red-600 h-6 rounded-full flex items-center justify-end pr-3">
                                    <span class="text-sm font-bold text-white">Tinggi</span>
                                </div>
                            </div>
                        </div>
                        <!-- Bar Kecemasan -->
                        <div id="chart-cemas-container">
                            <span class="text-lg font-semibold text-yellow-700">Kecemasan</span>
                            <div class="flex-1 bg-gray-200 rounded-full h-6 mt-2 shadow-inner">
                                <div id="chart-cemas" class="chart-bar bg-gradient-to-r from-yellow-400 to-yellow-600 h-6 rounded-full flex items-center justify-end pr-3">
                                    <span class="text-sm font-bold text-white">Sedang</span>
                                </div>
                            </div>
                        </div>
                        <!-- Bar Depresi -->
                        <div id="chart-depresi-container">
                            <span class="text-lg font-semibold text-blue-700">Depresi</span>
                            <div class="flex-1 bg-gray-200 rounded-full h-6 mt-2 shadow-inner">
                                <div id="chart-depresi" class="chart-bar bg-gradient-to-r from-blue-400 to-blue-600 h-6 rounded-full flex items-center justify-end pr-3">
                                    <span class="text-sm font-bold text-white">Rendah</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Kolom Kanan: Rekomendasi AI -->
                <div class="lg:col-span-1 bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-8 rounded-2xl shadow-2xl">
                    <h3 class="font-bold text-2xl mb-4">Rekomendasi Soul-AI</h3>
                    <div class="space-y-4 text-base opacity-90">
                        <p>Hasil tes menunjukkan level <strong class="font-bold">Stres yang cukup tinggi</strong>. Ini wajar dirasakan saat banyak tekanan.</p>
                        <p>Kami merekomendasikanmu untuk mencoba:</p>
                        <ul class="list-disc list-inside space-y-2">
                            <li><strong>Mini-Game "Tarik Napas"</strong> 2x sehari.</li>
                            <li><strong>Jurnal Harian</strong> untuk mencatat apa yang membuatmu stres.</li>
                            <li>Bicara dengan <strong>Soul-AI Chat</strong> untuk refleksi cepat.</li>
                        </ul>
                        <p class="mt-4"><strong class="font-semibold">Ingat, ini bukan diagnosis.</strong> Jika merasa sangat terganggu, jangan ragu hubungi profesional.</p>
                    </div>
                    <button onclick="showPage('page-games')" class="mt-6 w-full bg-white text-indigo-700 font-semibold py-3 px-5 text-base rounded-xl shadow-lg hover:shadow-xl hover:opacity-90 transition-all active:scale-95">
                        Coba Mini-Game Sekarang
                    </button>
                </div>
            </div>
         </div>

         <!-- Halaman 9: Soul-AI Chat -->
        <div id="page-chat" class="page" style="display: none;">
            <!-- Header Halaman -->
            <div>
                <h1 class="text-4xl font-bold text-gray-900">Soul-AI Chat</h1>
                <p class="text-lg text-gray-500 mt-1">Teman refleksi digitalmu. Aman, anonim, dan selalu ada.</p>
            </div>

            <!-- Konten Chat -->
            <div class="mt-6 bg-white h-[65vh] rounded-2xl shadow-lg flex flex-col">
                <!-- Area Pesan -->
                <div id="chat-messages" class="flex-1 p-6 space-y-4 overflow-y-auto">
                    <!-- Pesan Awal AI -->
                    <div class="chat-bubble flex justify-start">
                        <div class="bg-gray-100 text-gray-800 p-4 rounded-t-2xl rounded-br-2xl max-w-lg">
                            <p>Halo! Aku Soul-AI. Apa yang sedang kamu pikirkan atau rasakan hari ini? Kamu bisa cerita apapun di sini.</p>
                        </div>
                    </div>
                     <!-- Pesan dummy (akan diisi JS) -->
                </div>
                <!-- Area Input Teks -->
                <div class="p-4 bg-gray-50 border-t border-gray-200 rounded-b-2xl">
                    <form id="chat-form" class="flex items-center space-x-3">
                        <input id="chat-input" type="text" placeholder="Ketik ceritamu di sini..." class="flex-1 p-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-400">
                        <button type="submit" class="p-4 bg-indigo-600 text-white rounded-xl shadow-lg hover:bg-indigo-700 transition-all active:scale-95">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                        </button>
                    </form>
                </div>
            </div>
        </div>


    </main>

    <!-- Custom Alert/Notifikasi (pojok kanan atas) -->
    <div id="custom-alert" class="fixed top-6 right-6 max-w-sm w-full z-50 opacity-0 -translate-y-10 scale-95 pointer-events-none">
        <div class="mx-auto w-full max-w-xs bg-white rounded-xl shadow-lg border border-gray-200">
            <div class="p-4 flex items-center space-x-3">
                <div id="custom-alert-icon" class="w-10 h-10 flex-shrink-0 rounded-full bg-green-100 text-green-600 flex items-center justify-center">
                    <!-- Icon akan diisi oleh JS -->
                </div>
                <div>
                    <p id="custom-alert-message" class="text-sm font-semibold text-gray-800">Jurnal tersimpan!</p>
                </div>
            </div>
        </div>
    </div>


    <script>
        // --- DATA GLOBAL & KONTROL NAVIGASI ---
        const pages = document.querySelectorAll('.page');
        const navButtons = document.querySelectorAll('.nav-btn');
        let currentBreatheInterval = null;
        let userStreak = 5; 
        let userPoints = 120; // Poin gamifikasi
        let currentTestQuestion = 0;
        let testAnswers = {}; // Menyimpan jawaban tes
        let currentTestQuestions = []; // Akan diisi oleh startTest

        function showPage(pageId) {
            pages.forEach(page => { page.style.display = 'none'; });
            const targetPage = document.getElementById(pageId);
            if (targetPage) { targetPage.style.display = 'block'; }

            // Hentikan interval spesifik halaman
            stopBreatheGame();
            
            // Set status aktif untuk tombol navigasi
            navButtons.forEach(btn => {
                const iconPageId = btn.id.replace('nav-', 'page-');
                
                let isGamePage = (pageId === 'page-game-breathe' || pageId === 'page-game-filter');
                let isTestPage = (pageId === 'page-result');

                if (iconPageId === pageId || 
                   (isGamePage && iconPageId === 'page-games') ||
                   (isTestPage && iconPageId === 'page-test')) 
                {
                    btn.classList.remove('text-gray-500', 'hover:bg-gray-100');
                    btn.classList.add('bg-indigo-100', 'text-indigo-700');
                } else {
                    btn.classList.add('text-gray-500', 'hover:bg-gray-100');
                    btn.classList.remove('bg-indigo-100', 'text-indigo-700');
                }
            });

            // Logika spesifik per halaman
            if (pageId === 'page-home') {
                updateDashboard();
            }
            if (pageId === 'page-journal') {
                loadJournalPrompt();
            }
            if (pageId === 'page-game-breathe') {
                startBreatheGame();
            }
            if (pageId === 'page-game-filter') {
                loadThought(); 
            }
            if (pageId === 'page-profile') {
                updateProfile();
            }
            if (pageId === 'page-result') {
                animateChart(); // Animasikan chart saat halaman hasil dibuka
            }
             if (pageId === 'page-test') {
                // Tampilkan pilihan paket, sembunyikan pertanyaan
                document.getElementById('test-categories').style.display = 'grid';
                document.getElementById('test-questions').style.display = 'none';
            }

            document.getElementById('screen-content').scrollTop = 0;
        }

        function updateDashboard() {
            document.getElementById('streak-count-home').innerHTML = `üî• ${userStreak}`;
            document.getElementById('total-points-home').textContent = userPoints;
        }

        // --- LOGIKA JURNAL ---
        const journalPrompts = [
            "Apa satu hal kecil yang kamu syukuri hari ini?",
            "Siapa orang yang membuatmu tersenyum hari ini?",
            "Apa tantangan terbesar yang kamu hadapi hari ini dan bagaimana kamu mengatasinya?",
            "Tuliskan 3 hal yang kamu sukai dari dirimu sendiri.",
            "Bagaimana perasaanmu saat ini? Coba deskripsikan dengan jujur."
        ];

        function loadJournalPrompt() {
            document.getElementById('journal-input').value = ""; // Kosongkan input
            const promptElement = document.getElementById('journal-prompt');
            const randomIndex = Math.floor(Math.random() * journalPrompts.length);
            promptElement.textContent = journalPrompts[randomIndex];
            // Reset mood selection
            document.querySelectorAll('#mood-selection .mood-btn').forEach(btn => {
                btn.classList.remove('ring-2');
            });
        }

        function saveJournal() {
            userStreak++; 
            userPoints += 10; // Tambah poin
            showCustomAlert("Jurnal tersimpan! +10 Poin üî•", "success");
            
            setTimeout(() => {
                showPage('page-home');
            }, 2000);
        }

         // --- LOGIKA MOOD JURNAL (BARU) ---
        function selectMood(mood, element) {
            // Reset semua tombol
            const buttons = document.querySelectorAll('#mood-selection .mood-btn');
            buttons.forEach(btn => {
                btn.classList.remove('ring-2');
                btn.classList.remove('ring-red-400', 'ring-yellow-400', 'ring-blue-400', 'ring-indigo-400', 'ring-green-400');
            });
            
            // Set tombol yang aktif
            element.classList.add('ring-2');
            if (mood.includes('Sangat Sedih')) element.classList.add('ring-red-400');
            else if (mood.includes('Sedih')) element.classList.add('ring-yellow-400');
            else if (mood.includes('Biasa Saja')) element.classList.add('ring-blue-400');
            else if (mood.includes('Senang')) element.classList.add('ring-indigo-400');
            else if (mood.includes('Sangat Senang')) element.classList.add('ring-green-400');
        }

        // --- LOGIKA "VIBE CEPAT" ---
        function selectVibe(vibe, element) {
            const header = document.getElementById('vibe-header');
            header.textContent = `Oke, kamu merasa ${vibe} hari ini. Tercatat!`;
            
            const buttons = document.querySelectorAll('#vibe-selection .vibe-btn');
            buttons.forEach(btn => {
                btn.classList.remove('ring-2');
                btn.classList.remove('ring-indigo-500', 'ring-blue-500', 'ring-yellow-500', 'ring-red-500');
            });

            element.classList.add('ring-2');
            if (vibe === 'Senang') element.classList.add('ring-indigo-500');
            if (vibe === 'Tenang') element.classList.add('ring-blue-500');
            if (vibe === 'Cemas') element.classList.add('ring-yellow-500');
            if (vibe === 'Marah') element.classList.add('ring-red-500');
        }


        // --- LOGIKA GAME PERNAPASAN ---
        const breatheText = document.getElementById('breathe-text');
        const breatheSteps = ["Tarik Napas...", "Tahan...", "Hembuskan..."];
        let currentBreatheStep = 0;

        function startBreatheGame() {
            if (currentBreatheInterval) return; 
            function nextStep() {
                breatheText.textContent = breatheSteps[currentBreatheStep];
                currentBreatheStep = (currentBreatheStep + 1) % breatheSteps.length;
            }
            nextStep();
            currentBreatheInterval = setInterval(nextStep, 3500); 
        }

        function stopBreatheGame() {
            clearInterval(currentBreatheInterval);
            currentBreatheInterval = null;
            breatheText.textContent = "Siap?";
            currentBreatheStep = 0;
        }

        // --- LOGIKA GAME FILTER PIKIRAN ---
        const thoughts = [
            { text: "Saya pasti akan gagal dalam presentasi ini.", isHelpful: false },
            { text: "Saya sudah berlatih, saya akan lakukan yang terbaik.", isHelpful: true },
            { text: "Semua orang menertawakan saya.", isHelpful: false },
            { text: "Saya bisa belajar dari kesalahan jika itu terjadi.", isHelpful: true },
            { text: "Ini terlalu sulit, saya menyerah.", isHelpful: false }
        ];
        let currentThoughtIndex = 0;
        const thoughtCard = document.getElementById('thought-card');
        const thoughtText = document.getElementById('thought-text');
        const filterFeedback = document.getElementById('filter-feedback');

        function loadThought() {
            if (currentThoughtIndex >= thoughts.length) {
                currentThoughtIndex = 0; 
            }
            thoughtCard.style.opacity = '0';
            thoughtCard.style.transform = 'scale(0.9)';
            setTimeout(() => {
                thoughtText.textContent = thoughts[currentThoughtIndex].text;
                filterFeedback.textContent = ""; 
                filterFeedback.classList.remove('text-green-600', 'text-red-600');
                thoughtCard.style.opacity = '1';
                thoughtCard.style.transform = 'scale(1)';
            }, 300);
        }

        function checkThought(userChoice) {
            const correctChoice = thoughts[currentThoughtIndex].isHelpful;
            if (userChoice === correctChoice) {
                filterFeedback.textContent = "Tepat Sekali! +5 Poin";
                filterFeedback.classList.add('text-green-600');
                userPoints += 5; // Tambah poin
            } else {
                filterFeedback.textContent = "Coba lagi!";
                filterFeedback.classList.remove('text-green-600'); 
                filterFeedback.classList.add('text-red-600');
            }
            currentThoughtIndex++; 
            setTimeout(loadThought, 1500);
        }

        // --- LOGIKA PROFIL ---
        function updateProfile() {
            document.getElementById('streak-count').textContent = userStreak;
            document.getElementById('total-points').textContent = userPoints;
        }
        
        // --- LOGIKA TES AWAL (DIRUBAH PER KATEGORI) ---
        const allTestQuestions = {
            stres: [
                { q: "Saya merasa sulit untuk tenang dan rileks.", category: 'stres' },
                { q: "Saya mudah marah atau tersinggung.", category: 'stres' },
                { q: "Saya merasa terlalu terbebani oleh pekerjaan atau tugas.", category: 'stres' },
                { q: "Saya merasa tegang atau gelisah.", category: 'stres' },
                { q: "Saya sulit berkonsentrasi karena terlalu banyak pikiran.", category: 'stres' }
            ],
            cemas: [
                { q: "Saya merasa cemas berlebihan tentang banyak hal.", category: 'cemas' },
                { q: "Saya merasa panik atau takut secara tiba-tiba.", category: 'cemas' },
                { q: "Saya tidak bisa berhenti khawatir.", category: 'cemas' },
                { q: "Saya merasa gelisah dan tidak bisa diam.", category: 'cemas' },
                { q: "Saya takut hal buruk akan terjadi.", category: 'cemas' }
            ],
            depresi: [
                { q: "Saya merasa sedih dan murung hampir sepanjang waktu.", category: 'depresi' },
                { q: "Saya kehilangan minat pada hal-hal yang biasanya saya nikmati.", category: 'depresi' },
                { q: "Saya merasa lelah tanpa alasan yang jelas.", category: 'depresi' },
                { q: "Saya merasa tidak berharga atau bersalah.", category: 'depresi' },
                { q: "Saya kesulitan tidur atau tidur terlalu banyak.", category: 'depresi' }
            ]
        };
        const testOptions = ["Tidak Pernah", "Jarang", "Sering", "Hampir Selalu"];

        function startTest(testType) { // 'stres', 'cemas', or 'depresi'
            currentTestQuestions = allTestQuestions[testType]; // Pilih set pertanyaan
            currentTestQuestion = 0;
            testAnswers = { stres: 0, cemas: 0, depresi: 0 }; // Reset skor
            document.getElementById('test-categories').style.display = 'none'; // Sembunyikan paket
            document.getElementById('test-questions').style.display = 'block'; // Tampilkan pertanyaan
            
            // Pusatkan container pertanyaan
            const pageTest = document.getElementById('page-test');
            pageTest.classList.add('flex', 'flex-col', 'items-center');
            document.getElementById('test-questions').classList.add('w-full');
            
            loadTestQuestion();
        }

        function loadTestQuestion() {
            const question = currentTestQuestions[currentTestQuestion];
            document.getElementById('question-progress').textContent = `Pertanyaan ${currentTestQuestion + 1} dari ${currentTestQuestions.length}`;
            document.getElementById('question-text').textContent = question.q;

            const optionsContainer = document.getElementById('question-options');
            optionsContainer.innerHTML = '';
            testOptions.forEach((option, index) => {
                optionsContainer.innerHTML += `
                    <button onclick="answerQuestion(${index}, '${question.category}')" class="w-full text-left p-4 border border-gray-200 rounded-lg hover:bg-indigo-50 hover:border-indigo-400 transition-all active:scale-95">
                        ${option}
                    </button>
                `;
            });
        }

        function answerQuestion(score, category) {
            testAnswers[category] += score; // Tambah skor berdasarkan kategori
            currentTestQuestion++;
            if (currentTestQuestion < currentTestQuestions.length) {
                loadTestQuestion();
            } else {
                finishTest();
            }
        }

        function finishTest() {
            userPoints += 20; // Poin karena menyelesaikan tes
            showCustomAlert("Tes Selesai! +20 Poin üß†", "success");
            
            // Sembunyikan pertanyaan, tampilkan lagi paket tes
            document.getElementById('test-questions').style.display = 'none';
            document.getElementById('test-categories').style.display = 'grid';
            
            // Hapus centering dari Halaman Tes
             const pageTest = document.getElementById('page-test');
            pageTest.classList.remove('flex', 'flex-col', 'items-center');

            // Pindah ke halaman hasil
            setTimeout(() => {
                showPage('page-result');
            }, 1500);
        }

        // --- LOGIKA HASIL TES ---
        function animateChart() {
            const maxStres = (allTestQuestions.stres.length * 3);
            const maxCemas = (allTestQuestions.cemas.length * 3);
            const maxDepresi = (allTestQuestions.depresi.length * 3);
            
            let stresScore = (testAnswers.stres / maxStres) * 100 || 0;
            let cemasScore = (testAnswers.cemas / maxCemas) * 100 || 0;
            let depresiScore = (testAnswers.depresi / maxDepresi) * 100 || 0;

            // Jika belum tes (skor 0 semua), beri nilai default
            if (stresScore === 0 && cemasScore === 0 && depresiScore === 0) {
                stresScore = 70; cemasScore = 40; depresiScore = 25; // Default lama
                document.getElementById('chart-stres-container').style.display = 'block';
                document.getElementById('chart-cemas-container').style.display = 'block';
                document.getElementById('chart-depresi-container').style.display = 'block';
            } else {
                // Sembunyikan bar yang tidak relevan (skor 0)
                document.getElementById('chart-stres-container').style.display = stresScore > 0 ? 'block' : 'none';
                document.getElementById('chart-cemas-container').style.display = cemasScore > 0 ? 'block' : 'none';
                document.getElementById('chart-depresi-container').style.display = depresiScore > 0 ? 'block' : 'none';
            }
            
            // Set width ke 0 dulu untuk memicu transisi
            document.getElementById('chart-stres').style.width = `0%`;
            document.getElementById('chart-cemas').style.width = `0%`;
            document.getElementById('chart-depresi').style.width = `0%`;

            // Set width baru setelah delay singkat
            setTimeout(() => {
                document.getElementById('chart-stres').style.width = `${stresScore}%`;
                document.getElementById('chart-cemas').style.width = `${cemasScore}%`;
                document.getElementById('chart-depresi').style.width = `${depresiScore}%`;
            }, 100);
        }
        
        // --- LOGIKA AI CHAT ---
        const chatForm = document.getElementById('chat-form');
        const chatInput = document.getElementById('chat-input');
        const chatMessages = document.getElementById('chat-messages');

        const aiResponses = [
            "Itu terdengar wajar untuk dirasakan. Bisa ceritakan lebih lanjut?",
            "Terima kasih sudah berbagi. Mengakui perasaan itu adalah langkah pertama.",
            "Bagaimana perasaanmu saat hal itu terjadi?",
            "Itu pasti sulit. Apa yang biasanya kamu lakukan untuk merasa lebih baik?",
            "Aku mengerti. Coba kita tarik napas sejenak. Tarik... Hembuskan..."
        ];

        chatForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const messageText = chatInput.value.trim();
            if (messageText === "") return;

            // 1. Tampilkan pesan user
            const userBubble = document.createElement('div');
            userBubble.className = "chat-bubble flex justify-end";
            userBubble.innerHTML = `
                <div class="bg-indigo-600 text-white p-4 rounded-t-2xl rounded-bl-2xl max-w-lg">
                    <p>${messageText}</p>
                </div>
            `;
            chatMessages.appendChild(userBubble);
            
            chatInput.value = ""; // Kosongkan input
            chatMessages.scrollTop = chatMessages.scrollHeight; // Auto-scroll

            // 2. Tampilkan "typing..."
            const typingBubble = document.createElement('div');
            typingBubble.className = "chat-bubble flex justify-start";
            typingBubble.id = "typing-indicator";
            typingBubble.innerHTML = `
                <div class="bg-gray-100 text-gray-800 p-4 rounded-t-2xl rounded-br-2xl max-w-lg">
                    <p class="italic">Soul-AI sedang mengetik...</p>
                </div>
            `;
            chatMessages.appendChild(typingBubble);
            chatMessages.scrollTop = chatMessages.scrollHeight;

            // 3. Tampilkan jawaban AI (dummy)
            setTimeout(() => {
                const aiBubble = document.createElement('div');
                aiBubble.className = "chat-bubble flex justify-start";
                const randomResponse = aiResponses[Math.floor(Math.random() * aiResponses.length)];
                aiBubble.innerHTML = `
                    <div class="bg-gray-100 text-gray-800 p-4 rounded-t-2xl rounded-br-2xl max-w-lg">
                        <p>${randomResponse}</p>
                    </div>
                `;
                // Ganti "typing..." dengan jawaban
                chatMessages.replaceChild(aiBubble, typingBubble);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 1500 + Math.random() * 1000);
        });


        // --- LOGIKA CUSTOM ALERT ---
        function showCustomAlert(message, type = 'success') {
            const alertBox = document.getElementById('custom-alert');
            const alertMessage = document.getElementById('custom-alert-message');
            const alertIcon = document.getElementById('custom-alert-icon');

            alertMessage.textContent = message;

            if (type === 'success') {
                alertIcon.innerHTML = '<span>üéâ</span>'; 
                alertIcon.className = 'w-10 h-10 flex-shrink-0 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-xl';
            } else {
                alertIcon.innerHTML = '<span>!</span>';
                alertIcon.className = 'w-10 h-10 flex-shrink-0 rounded-full bg-red-100 text-red-600 flex items-center justify-center text-xl';
            }

            alertBox.classList.remove('opacity-0', '-translate-y-10', 'scale-95');
            alertBox.classList.add('opacity-100', 'translate-y-0', 'scale-100');

            setTimeout(() => {
                alertBox.classList.add('opacity-0', '-translate-y-10', 'scale-95');
                alertBox.classList.remove('opacity-100', 'translate-y-0', 'scale-100');
            }, 3000);
        }

        // Inisialisasi: Tampilkan halaman home saat pertama kali dimuat
        document.addEventListener('DOMContentLoaded', () => {
            showPage('page-home');
        });
    </script>

</body>
</html>

